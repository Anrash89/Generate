<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Генератор Этикеток</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="editor-container">
        <div class="card" id="auth-section">
            <div id="login-view">
                <h2>Вход или Регистрация</h2>
                <div class="form-group">
                    <label for="email">Email:</label>
                    <input type="email" id="email" placeholder="user@example.com">
                </div>
                <div class="form-group">
                    <label for="password">Пароль:</label>
                    <input type="password" id="password" placeholder="******">
                </div>
                <div id="auth-status" class="status-message"></div>
                <div class="button-group">
                    <button type="button" onclick="loginUser()">Войти</button>
                    <button type="button" onclick="registerUser()">Регистрация</button>
                </div>
            </div>
            <div id="user-view" style="display: none;">
                <p>Вы вошли как: <strong id="user-email"></strong></p>
                <a href="list.html" class="list-link">Посмотреть список всех стикеров &rarr;</a>
                <button type="button" onclick="logoutUser()">Выйти</button>
            </div>
        </div>

        <div class="card">
            <h2>Загрузить стикер из базы</h2>
            <div class="form-group">
                <label for="loadSku">Артикул для загрузки:</label>
                <input type="text" id="loadSku" placeholder="Введите артикул (SKU)">
            </div>
             <div id="load-status" class="status-message"></div>
            <button type="button" onclick="loadLabel()">Загрузить из Базы</button>
        </div>
        
        <div class="card">
            <h1>Генератор этикеток</h1>
            <form id="label-form">
                 <h3>Настройки этикетки</h3>
                <div class="settings-grid">
                    <div><label for="labelWidth">Ширина (мм):</label><input type="number" id="labelWidth" value="58"></div>
                    <div><label for="labelHeight">Высота (мм):</label><input type="number" id="labelHeight" value="40"></div>
                    <div><label for="fontSize">Размер шрифта (pt):</label><input type="number" id="fontSize" value="6.5" step="0.5"></div>
                    <div><label for="lineHeight">Интервал (множитель):</label><input type="number" id="lineHeight" value="1.1" step="0.05"></div>
                    <div><label for="iconSize">Высота значков (мм):</label><input type="number" id="iconSize" value="6" step="0.5"></div>
                </div>
                <div class="autofit-container"><input type="checkbox" id="autoHeight" onchange="toggleAutoHeight()"><label for="autoHeight">Автоподбор высоты</label></div>
                <hr>

                <h3>Значки</h3>
                <div class="icons-selection-container">
                    <div><input type="checkbox" id="icon-eac" name="icons" value="eac.png" checked><label for="icon-eac">EAC</label></div>
                    <div><input type="checkbox" id="icon-pap20" name="icons" value="pap20.png" checked><label for="icon-pap20">PAP 20</label></div>
                    <div><input type="checkbox" id="icon-pp05" name="icons" value="pp05.png"><label for="icon-pp05">PP 05</label></div>
                    <div><input type="checkbox" id="icon-abs9" name="icons" value="abs9.png"><label for="icon-abs9">ABS 9</label></div>
                    <div><input type="checkbox" id="icon-ps06" name="icons" value="ps06.png"><label for="icon-ps06">PS 06</label></div>
                    <div><input type="checkbox" id="icon-pap21" name="icons" value="pap21.png"><label for="icon-pap21">PAP 21</label></div>
                    
                    <div><input type="checkbox" id="icon-rst" name="icons" value="rst.png"><label for="icon-rst">РСТ</label></div>
                    <div><input type="checkbox" id="icon-food" name="icons" value="food.png"><label for="icon-food">Пищевой</label></div>
                    <div><input type="checkbox" id="icon-mobius" name="icons" value="mobius.png"><label for="icon-mobius">Петля</label></div>

                    <div><input type="checkbox" id="icon-pet01" name="icons" value="pet01.png"><label for="icon-pet01">PET 01</label></div>
                    <div><input type="checkbox" id="icon-o07" name="icons" value="o07.png"><label for="icon-o07">O 07</label></div>
                </div>
                <hr>
                
                <h3>Содержимое этикетки</h3>
                <label for="productName">Наименование товара:</label><input type="text" id="productName" value="Набор для уборки полов">
                
                <label for="sku">Артикул (SKU):</label><input type="text" id="sku" value="440516">
                
                <label for="ean13">Штрихкод (EAN-13):</label><input type="text" id="ean13" value="4600000000000">
                
                <label for="composition">Комплектация:</label><textarea id="composition" rows="2">Ведро x 1, платформа для крепления тряпки x 1, туба для швабры x 1, насадка тканевая x 2</textarea>
                
                <label for="material">Состав (Материал):</label><textarea id="material" rows="2">полипропилен, полиэстер, полиэтилентерефталат, акрилонитрилбутадиенстирол, термопластичная резина, нержавеющая сталь</textarea>
                
                <label for="origin">Страна происхождения:</label><input type="text" id="origin" value="Китай">
                
                <label for="productionDate">Дата производства / Партия:</label><input type="text" id="productionDate" value="Ноябрь 2025">
                
                <label for="manufacturer">Производитель:</label><textarea id="manufacturer" rows="2">BENHENG TECHNOLOGY LTD., Адрес: No.68 Jinggang Road, Shushan District, Hefei, Anhui, China, KHP</textarea>
                
                <label for="importer">Импортер / Претензии:</label><textarea id="importer" rows="4">ООО «Спринг», РФ, 121596, г. Москва, вн.тер.г. муниципальный округ Можайский, ул. Горбунова, д.2, стр.3, помещ.33/2, ИНН 7733368052, ОГРН 1217700184800, Тел.: +7 (495) 032-02-97, e-mail: info@springingredients.ru</textarea>
                
                <label for="storageConditions">Условия хранения:</label><textarea id="storageConditions" rows="2">продукция должна храниться в сухом, проветриваемом помещении.</textarea>
                
                <label for="shelfLife">Срок службы / Годность:</label><textarea id="shelfLife" rows="1">Срок хранения, срок службы (годности) не ограничен.</textarea>
                
                <label for="compliance">Инфо (внизу слева):</label><textarea id="compliance" rows="1"></textarea>
                
                <label for="warning">Внимание (скрыто на фото, но оставим):</label><input type="text" id="warning" value="">
                
                <label for="feedbackContact">Контакт (скрыт на фото):</label><input type="text" id="feedbackContact" value="">
                
                <div class="meta-info">
                    <p>Создал: <span id="meta-created">N/A</span></p>
                    <p>Последнее изменение: <span id="meta-updated">N/A</span></p>
                </div>

                <div id="save-status" class="status-message"></div>
                <div class="button-group">
                    <button type="button" onclick="generateLabel()">Обновить</button>
                    <button type="button" class="primary-button" onclick="saveLabel()">Сохранить в Базу</button>
                    <button type="button" onclick="window.print()">Печать</button>
                </div>
            </form>
        </div>
    </div>
    
    <div class="preview-container">
        <h2>Предпросмотр</h2>
        <div id="label-preview" class="label">
            
            <div class="label-content">
                <div class="header-section">
                    <strong id="preview-productName"></strong>
                    <div id="preview-sku-header" class="sku-header"></div>
                </div>
                
                <div class="details-section">
                    <div class="detail-row"><strong>Комплектация: </strong><span id="preview-composition"></span></div>
                    <div class="detail-row"><strong>Состав: </strong><span id="preview-material"></span></div>
                    <div class="detail-row"><strong>Страна происхождения: </strong><span id="preview-origin"></span></div>
                    <div class="detail-row"><strong>Дата производства / Партия: </strong><span id="preview-productionDate"></span></div>
                    <div class="detail-row"><strong>Производитель: </strong><span id="preview-manufacturer"></span></div>
                    <div class="detail-row"><strong>Импортер/лицо для претензий в РФ: </strong><span id="preview-importer"></span></div>
                    <div class="detail-row"><strong>Условия хранения: </strong><span id="preview-storageConditions"></span></div>
                    <div class="detail-row"><span id="preview-shelfLife"></span></div>
                    <div class="detail-row"><strong>Внимание: </strong><span id="preview-warning"></span></div>
                    <div class="detail-row"><span id="feedback-content"></span></div>
                </div>

                <div class="footer-section">
                      <div class="footer-text">
                          <span id="preview-compliance"></span>
                      </div>
                      <div id="preview-icons" class="icons-wrapper"></div>
                </div>
            </div>

            <div class="label-sidebar">
                <div class="barcode-wrapper">
                      <svg id="barcode"></svg>
                </div>
            </div>

        </div>
    </div>

    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-firestore-compat.js"></script>
    
    <script src="https://cdn.jsdelivr.net/npm/jsbarcode@3.11.5/dist/JsBarcode.all.min.js"></script>
    <script src="script.js"></script>
</body>
</html>
